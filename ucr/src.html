<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="light dark">
    <title>GeneFunction Use Cases and Requirements</title>
    <script
      src="https://www.w3.org/Tools/respec/respec-w3c"
      class="remove"
      defer
    ></script>
    <script class="remove">
      var respecConfig = {
        historyURI: null,
        edDraftURI: null,
        editors: [
          {
            name: "Eric Prud'hommeaux",
            url: "https://uu3.org/People/Eric",
          },
        ],
        lint: {
          "no-http-props": false,
          "check-punctuation": true,
        },
        highlighters: [
          {
            lang: "solidity",
            propName: "hljsDefineSolidity",
            langURL: "https://rawgit.com/pospi/highlightjs-solidity/master/solidity.js",
          },
          {
            lang: "cypher",
            propName: "hljsDefineCypher",
            langURL: "cypher-tweaked.min.js",
          },
        ],

        preProcess: [loadHighlighters, addSectionIds, fixIncludes],
        postProcess: [
          fixLinks,
          addWikiLinks,
          fixMarkupPostprocess,
          postProcessEnhance,
          cleanup,
        ],
        monetization: {
          removeOnSave: false,
        },
        logos: [
          {
            src: "astera-logo.svg",
            alt: "Astera logo",
            height: 120,
            url: "https://astera.org/",
          },
        ],
        github: "GeneFunction/specs",
        otherLinks: [
          {
            key: "Edit this documentation",
            data: [
              {
                value: "Single Page",
                href: "https://github.com/GeneFunction/specs/ucr/src.html",
              },
            ],
          },
        ],
        localBiblio: {
          FileAPI: {
            authors: [
              "Arun Ranganathan",
              "Jonas Sicking"
            ],
            date: "12 September 2013",
            deliveredBy: [
              {
                shortname: "webapps",
                url: "http://www.w3.org/2008/webapps/",
              }
            ],
            edDraft: "http://dev.w3.org/2006/webapi/FileAPI/",
            href: "http://www.w3.org/TR/FileAPI/",
            id: "FileAPI",
            publisher: "W3C",
            status: "LCWD",
            title: "File API",
          },
          rfc2119: {
            authors: [
              "S. Bradner"
            ],
            date: "March 1997",
            href: "http://www.ietf.org/rfc/rfc2119.txt",
            id: "rfc2119",
            publisher: "IETF",
            status: "Best Current Practice",
            title: "Key words for use in RFCs to Indicate Requirement Levels",
          }
        },
      };

      async function loadHighlighters(config, document, {showWarning, showError}) {
        const worker = await new Promise(resolve => {
          require(["core/worker"], ({ worker }) => resolve(worker));
        });

        return Promise.all(config.highlighters.map(({lang, propName, langURL}) => {
          const action = "highlight-load-lang";
          langURL = new URL(langURL, document.URL).href; // resolve relative to document
          worker.postMessage({action, langURL, propName, lang});
          return new Promise((resolve, reject) => {
            worker.addEventListener("message", function listener({data}) {
              const {action: responseAction, lang: responseLang} = data;
              if (responseAction === action && responseLang === lang) {
                worker.removeEventListener("message", listener);
                resolve();
              }
            });
          });
        }));
      }

      function addSectionIds() {
        const sections = document.querySelectorAll(
          "section[data-include]:not([id])",
        );
        for (const section of sections) {
          section.id = section.dataset.include;
        }
      }

      function fixIncludes() {
        for (const section of document.querySelectorAll(
          "section[data-include]",
        )) {
          const { include } = section.dataset;
          Object.assign(section.dataset, {
            includeName: include,
            includeFormat: "markdown",
            oninclude: "fixMarkupOnInclude",
            // TODO: update URL on migration to speced org
            include: `${include}.md`,
          });
          if (!section.hasAttribute("data-max-toc")) {
            section.dataset.maxToc = section.querySelector("section")
              ? "2"
              : "1";
          }
        }
      }

      /**
       * @param {*} _
       * @param {string} content
       */
      function fixMarkupOnInclude(_, content) {
        const ZERO_WIDTH_SPACE = "&#8203;";
        // Escape [[[foo]]] and [[foo]] by adding zero-width space. We remove these
        // extraneous characters in postProcess, so users don't end up copy pasting
        // them. Ugly, but  other way is upstream changes for an extreme edge case.
        content = content
          .replace(/\[\[/g, `[${ZERO_WIDTH_SPACE}[${ZERO_WIDTH_SPACE}`)
          // Similarly for [= term =], {{ term }}, [^elem^]
          .replace(/\[=/g, `[${ZERO_WIDTH_SPACE}=`)
          .replace(/{{/g, `{${ZERO_WIDTH_SPACE}{`)
          .replace(/\[\^/g, `[${ZERO_WIDTH_SPACE}^`)
          // and also escape | used for inline variables
          .replace(/\`\\\|(\w+)/g, `\`\\|${ZERO_WIDTH_SPACE}$1`)
          .replace(/(\w+)\\\|\`/g, `$1${ZERO_WIDTH_SPACE}\\|\``)
          .replace(/\`\|(\w+)/g, `\`\\|${ZERO_WIDTH_SPACE}$1`)
          .replace(/(\w+)\|\`/g, `$1${ZERO_WIDTH_SPACE}\\|\``);

        // Add .note and .advisement classes based on line prefix
        content = content
          .split("\n")
          .map(line => {
            if (/^.{0,5}\s*Warning:/.test(line))
              return `<div class="advisement">\n\n${line}</div>`;
            if (/^.{0,5}\s*Note:/.test(line))
              return `<div class="note">\n\n${line}</div>`;
            return line;
          })
          .join("\n");

        return content;
      }

      function fixMarkupPostprocess() {
        for (const elem of document.querySelectorAll("code")) {
          if (elem.innerHTML.includes("&amp;#8203;")) {
            elem.innerHTML = elem.innerHTML.replace(/&amp;#8203;/g, "");
          }
          if (elem.innerHTML.includes("\\|")) {
            elem.innerHTML = elem.innerHTML.replace(/\\\|/g, "|");
          }
        }
      }

      function postProcessEnhance() {
        for (const elem of document.querySelectorAll("section dl, table")) {
          elem.classList.add("def");
        }
      }

      function fixLinks() {
        /** @type {NodeListOf<HTMLAnchorElement>} */
        const anchors = document.querySelectorAll(
          "section a:not([href^=http]):not([href^='mailto:']):not([href^='#'])",
        );
        for (const a of anchors) {
          const href = a.hash ? a.hash.slice(1) : a.pathname.split("/").pop();
          if (document.getElementById(href)) {
            a.href = `#${href}`;
          } else if (document.getElementById(`id-${href}`)) {
            // Special section IDs like "conformance" trigger ReSpec's "include"
            // behaviour. We manually add `id-` prefix to overcome that.
            a.href = `#id-${href}`;
          } else if (document.querySelector(`[data-include-name="${href}"]`)) {
            const { id } = document.querySelector(
              `[data-include-name="${href}"]`,
            );
            a.href = `#${id}`;
          } else {
            // TODO: update URL on migration to speced org
            a.href = `https://github.com/GeneFunction/specs`;
          }
        }
      }

      function addWikiLinks() {
        const createWikiLink = includeName => {
          const wikiLink = document.createElement("a");
          // TODO: update URL on migration to speced org
          wikiLink.href = `https://github.com/GeneFunction/specs/wiki/${includeName}/_edit`;
          const title = "Edit this section on Wiki";
          wikiLink.title = title;
          wikiLink.setAttribute("aria-label", title);
          wikiLink.textContent = "ðŸ“ Edit";
          wikiLink.classList.add("wiki-link");
          return wikiLink;
        };

        for (const section of document.querySelectorAll("section")) {
          const closest = section.closest("section[data-include-name]");
          if (!closest) continue;
          const { includeName } = closest.dataset;
          const wikiLink = createWikiLink(includeName);
          section.querySelector("h2, h3, h4, h5, h6").append(wikiLink);
        }
      }

      function cleanup() {
        const attributesToRemove = [
          "data-max-toc",
          "data-include-name",
          "data-oninclude",
        ];
        const selector = attributesToRemove.map(attr => `[${attr}]`).join(", ");
        document.querySelectorAll(selector).forEach(el => {
          attributesToRemove.forEach(attr => el.removeAttribute(attr));
        });

        document.getElementById("respec-dfn-panel").remove();
      }
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <section id="abstract">
      <p>
        The GeneFunction libraries <em class="todo">will</em> provide cross-platform functionality for support of machine-learning association studies with the goal of making research of gene function as easy as possible.
        This document captures provides a collaborative way to identify the ways the GeneFunction libraries may be used and the consequential architectural, API and programming requirements. 
      </p>
    </section>
    <section data-max-toc="3" data-include-name="document-conventions">
      <h2>Document Conventions</h2>
      <section
        data-include="md/document-conventions"
        data-include-replace="true"
      ></section>
      <section data-max-toc="1" data-include="md/status-conventions"></section>
    </section>
    <section data-max-toc="2" data-include="md/operating-environment"></section>
    <section>
      <h2>Use Cases</h2>
      <section data-include="md/addSectionLinks"></section>
      <section data-include-name="lint" data-max-toc="2">
        <section data-include="md/lint" data-include-replace="true"></section>
      </section>
    </section>
    <section class="appendix" data-include="md/Ecosystem"></section>
    <section>
      <h2>Editing this document</h2>
      <p>
        This document is generated directly from the content of the <a href="https://github.com/GeneFunction/specs">GeneFunction specifications project</a> on GitHub.
        Thus, it can be edited in two ways:
      </p>
      <dl>
        <dt>GitHub Pull Request</dt>
        <dd>
          Submit <a href="https://github.com/GeneFunction/specs/pulls">PRs</a> on the <a href="https://github.com/GeneFunction/specs/blob/main/ucr/src.html">src.html</a> for this document.
        </dd>
        <dt>GitHub Issue</dt>
        <dd>
          Raise GitHub issues on the <a href="https://github.com/GeneFunction/specs/issues">GeneFunction specs issues</a>.
        </dd>
      </dl>
    </section>
   <!-- todo: re-add once there is something to which one can conform
       <section id="conformance" class="removeOnSave"></section>
       -->
  </body>
</html>
